<!DOCTYPE html>
<html lang="en" id="snapshot">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Accomplishments">
    <link rel="icon" href="../../favicon.ico">
    <title>Snapshot - The Nature Conservancy</title>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,800,700,400italic|Open+Sans+Condensed:700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" media="all">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootflat/2.0.4/css/bootflat.min.css"> 
       
    <link rel='stylesheet' href='https://api.tiles.mapbox.com/mapbox.js/v2.4.0/mapbox.css' media="all"/>
		<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
		<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' /> 
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/8.3.0/nouislider.min.css" media="all">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chartist/0.9.7/chartist.min.css">

    <link rel="stylesheet" href="css/snapshot.css" media="all">

  </head>
<body id="tncexplorer">

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <h1><i class="fa fa-map-o"></i>Snapshot <sup>Beta</sup></h1> 
    <div class="btn-group">
    </div>
    <img src="img/logo45white.png" class="pull-right tnc-logo"/>
  </div>
</nav>


<div id="main" class="container-fluid">
  <div class="row">
<!-- Left side - UI & Map __________ -->
    <div id="ui" class="col-xs-6 col-sm-6 col-md-7 no-padding-left">
			<div id="map"></div>
    </div> <!-- End ui -->

<!-- Right side - Results __________ -->

    <div id="results" class="col-xs-6 col-sm-6 col-md-5">
    <script id='template' type='text/ractive'>
	

    <div id="summary-buttons" class="btn-group" role="group" aria-label="...">
      <a href="#summary" on-click='section-change' id="button-summary" class="btn btn-default {{#if appstate.activeTab === 'button-summary'}} active {{/if}}" aria-controls="home" role="button" data-toggle="tab">Summary</a>
      <a href="#pieces" on-click='section-change' id="button-pieces" class="btn btn-default {{#if appstate.activeTab === 'button-pieces'}} active {{/if}}" aria-controls="home" role="button" data-toggle="tab">Timeline</a>
      <a href="#details" on-click='section-change' id="button-details" class="btn btn-default {{#if appstate.activeTab === 'button-details'}} active {{/if}}" aria-controls="home" role="button" data-toggle="tab">Details</a>
    </div> 

		<div class="btn-group pull-right" role="group" aria-label="..." id="filter-dropdown" >


      <div class="btn-group" role="group">    
		    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-info-circle"></i>
        </button>

        <div id="dropdown-options" class="container-fluid dropdown-menu dropdown-menu-right keep_open">
          <div class="row">
            <h2>About</h2>
            <p>Snapshot shows what The Nature Conservancy has accomplished across space and time. It is a work-in-progress, and 
            should not be interpreted to give the complete picture of what has TNC has accomplished.</p>
            <p><em>Disclaimer: Acreage for lands conservation is determined from GIS acres, NOT CLS.</em></p>
            <p>Questions? Contact <a href="mailto:dmajka@tnc.org">Dan Majka</a> or <a href="mailto:jfargione@tnc.org">Joe Fargione</a>.</p>

            <hr/>
            <h3>Options</h3>
            <p>Set units: <a id="english" href="#" on-click="unit-change">English</a> &nbsp; <a id="metric" href="#" on-click="unit-change">Metric</a></p>
            <p>Change data: <a id="completed" href="#" on-click="data-change">Completed</a> &nbsp; <a id="active" href="#" on-click="data-change">Active</a></p>
<!--             <p>Projects tour: <a id="tour-yes" href="#" on-click="tour-change">Yes</a> &nbsp; <a id="tour-no" href="#" on-click="tour-change">No</a></p>
            <p>Change data: <a id="completed" href="#" on-click="data-change">Completed</a> &nbsp; <a id="active" href="#" on-click="data-change">Active</a></p>


						<label class="switch-light switch-candy" on-click="unit-change">
						  <input type="checkbox">
						  <strong>Change units</strong>
						  <span>
						    <span>English</span> <span>Metric</span>
						    <a></a>
						  </span>
						</label>

						<label class="switch-light switch-candy" on-click="unit-change">
						  <input type="checkbox">
						  <strong>Projects Tour</strong>
						  <span>
						    <span>Off</span> <span>On</span>
						    <a></a>
						  </span>
						</label>

						<label class="switch-light switch-candy" on-click="unit-change">
						  <input type="checkbox">
						  <strong>Change Data</strong>
						  <span>
						    <span>Completed</span> <span>Active</span>
						    <a></a>
						  </span>
						</label> -->

          </div>
        </div>
      </div>




		  <div class="btn-group" role="group">
		    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		      <i class="fa fa-sliders"></i> <span class="filter-label">Filter</span>
		      <span class="caret"></span>
		    </button>

			<div id="filter-strip" class="container-fluid dropdown-menu dropdown-menu-right keep_open">
		    <div class="row">
		      <h2>Filter Data</h2>
		      <p>Could put a short two sentence description in here about filtering data. Probably should make it short and sweet though.</p>
		  		<h3>Spatial Extent</h3>
		  		<div class="col-xs-12 col-sm-12 col-filter keep_open">
						<select id="spatial-select" class="form-control ">
								<option selected disabled> Select Extent</option>
							<optgroup label="Political Boundary">
		            <option value="usa_states">State (OU)</option>
		            <option value="countries">Country</option>
		            <option value="congressional_districts">Congressional District</option>
		          </optgroup>
							<optgroup label="Conservation Boundary">
		            <option value="whole_systems">Whole System</option>
		            <option>TNC Region</option>
		          </optgroup>

							<optgroup label="Watersheds">
		            <option value="huc2">HUC2</option>           
		            <option value="huc4">HUC4</option>
		            <option value="huc6">HUC6</option>
		            <option value="huc8">HUC8</option>	
		          </optgroup>			
						</select>
		  		</div>
		  		<div class="col-xs-12 col-sm-12 col-filter">
		        <select class="form-control" id="spatial-select-options" multiple="multiple">      
		        </select>
		  		</div>
		    </div>

        <div class="row time-slider-row">
          <h3>Time Period <span class="time-range"> ({{Math.round(appstate.filters.time[0])}} - {{Math.round(appstate.filters.time[1])}})</span></h3>
          <div class="col-xs-12">
              <div id="time-slider"></div>           
          </div>
        </div>
<!-- 		        <p><a href="#" id="filter-reset" on-click="reset-filter">Reset Filter</a></p> -->
		  </div> <!-- End filter-strip -->
    </div>
</div>

<!-- {{#appstate.filters.turf.filterOptions}}
<div class="filter-status">
<p>Currently displaying projects in {{appstate.filters.turf.filterName}}: {{#appstate.filters.turf.filterOptions:i}}{{i}}, {{/appstate.filters.turf.filterOptions}} from {{appstate.filters.time[0]}} to {{appstate.filters.time[1]}}</p>

</div>
{{/appstate.filters.turf.filterOptions}} -->

{{#if appstate.projectScope === 'completed'}}
<!-- Summary of markers -->
      <div id="results-content" class="tab-content">
        <div role="tabpanel" class="tab-pane {{#if appstate.activeTab === 'button-summary'}} active {{/if}}" id="summary"> 
          {{#if appstate.activeTab === 'button-summary'}}
              {{>summaryLands}}
              {{>summaryCoastal}}
              {{>summaryFreshwater}}
          {{/if}}
        </div> <!-- End summary -->

<!-- List of markers in view -->
      <div role="tabpanel" class="tab-pane {{#if appstate.activeTab === 'button-pieces'}} active {{/if}}" id="pieces">
        {{#if appstate.activeTab === 'button-pieces'}}
          <div class="col-xs-12">
            <span id="pieces-head"></span>
            <div class="row">
            <div  class="timeline">
              <dl>

              {{#paginateProjects():i}} <!-- {{i}} is year in projects by year object-->

              {{/paginateProjects}}

              {{#derivedData.timelineYears:year}}
                <dt>
                	{{#if this === 'Invalid date'}}
                		Unknown Year
                		{{else}}
                		{{this}}
                	{{/if}}
                </dt> <!-- Year from years array -->
                  {{#lookupProjectsByYear(derivedData.byYear, this):i}}
                    {{#if this.dataname === 'tnclands'}}
                      {{>cardLands}}   
                    {{/if}}

                    {{#if this.dataname === 'coastalprojects'}}
                      {{>cardCoastal}}
                    {{/if}}

                    {{#if this.dataname === 'freshwater'}}
                      {{>cardFreshwater}}
                    {{/if}}

                  {{/lookupProjectsByYear}}
              {{/derivedData.timelineYears}}

              </dl>              
            </div>
            </div>
          </div>

          <!-- PAGINATION ----------- -->
          <hr/>
          <h5>Displaying {{appstate.detailsPageIndex[0]+1}} - 
					{{#if derivedData.combinedMarkersInBounds.length < appstate.detailsPageIndex[1]}}
						{{derivedData.combinedMarkersInBounds.length}}
					{{else}}
          	{{appstate.detailsPageIndex[1]}}
          {{/if}}
           of {{derivedData.combinedMarkersInBounds.length}} projects. 
					{{#if derivedData.combinedMarkersInBounds.length > appstate.detailsPageIndex[1]}}

					{{/if}}
           </h5>

          <nav>
            <ul class="pagination">
              <li>
                <a id="page-down" href="#results" aria-label="Previous" on-click='page-change' class="{{#if appstate.detailsPageIndex[0] === 0}} not-active {{/if}}">
                  <span aria-hidden="true">&laquo; PREV</span>
                </a>
              </li>
              <li>
                <a id="page-up" href="#results" aria-label="Next" on-click='page-change' class="{{#if derivedData.combinedMarkersInBounds.length <= appstate.detailsPageIndex[1]}} not-active {{/if}}">
                  <span aria-hidden="true">NEXT &raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        {{/if}}
      </div> <!-- End cards view -->

<!-- Project details -->
        <div role="tabpanel" class="tab-pane {{#if appstate.activeTab === 'button-details'}} active {{/if}}" id="details">
        {{#if appstate.activeTab === 'button-details'}}
          {{#appstate.activeDetails}}
            {{#if dataname === 'tnclands'}}
              {{>detailsLands}}
            {{/if}}

            {{#if dataname === 'coastalprojects'}}
              {{>detailsCoastal}}
            {{/if}}

            {{#if dataname === 'freshwater'}}
              {{>detailsFreshwater}}
            {{/if}}

            {{else}}
              <p>Select a project's details</p>
          {{/appstate.activeDetails}}
        {{/if}}
        </div> <!-- End tabpanel -->
      </div> <!-- End results-content --> 

{{/if}}


{{#if appstate.projectScope === 'active'}}
	<div id="results-content" class="tab-content">
		{{#fundraising:i}}
			<div class="card-summary-active">
			  <h3>{{ProjectName}}</h3>
			  <p>{{ProjectBriefDescription}}</p>
			  <ul>
			    <li><strong>Project Keywords:</strong> {{#ProjectKeyword}}{{this}}, {{/ProjectKeyword}}</li>
			  </ul>
			</div>
		{{/fundraising}}
	</div>
{{/if}}

    </script> <!-- End template -->
    </div> <!-- End results -->
  </div> <!-- End row -->
</div> <!-- End main -->

<div class="container-fluid footer" >
  <p>© 2015 The Nature Conservancy - <a href="http://www.nature.org/about-us/governance/terms-of-use/index.htm?src=f9">Legal Disclosure</a> - <a href="http://www.nature.org/about-us/governance/privacy-policy.xml?src=f6">Privacy</a></p>
</div>

<script type="text/javascript" src="js/bundle.js"></script>
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
</body>
</html>